pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
#include snake.lua
#include vector.lua

-- main.p8

function _init()
    printh(" ")

    -- snake = Snake.new(100, 64, 40, 2)
    snake = Snake.new(100, 64, 160, 1)
    snake_girth = 3
    snake_lines = snake:get_outer_lines(3)
end


function _update()
    local x_move = 0
    local y_move = 0

    if btn(⬅️) then
        x_move = -1
    elseif btn(➡️) then
        x_move = 1
    end

    if btn(⬆️) then
        y_move = -1
    elseif btn(⬇️) then
        y_move = 1
    end
    
    -- constrain speed if moving diagonally
    if x_move != 0 and y_move != 0 then
        x_move = 0.7 * x_move
        y_move = 0.7 * y_move
    end
    
    snake.points[1][1] += x_move
    snake.points[1][2] += y_move
    
    snake:constrain()
    snake_lines = snake:get_outer_lines(3)
end


function _draw()
    cls()
    
    for curr_line in all(snake_lines) do
        line(curr_line[1][1], curr_line[1][2], curr_line[2][1], curr_line[2][2], 7)
    end
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
